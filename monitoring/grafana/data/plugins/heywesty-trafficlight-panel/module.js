/* [create-plugin] version: 4.16.2 */
define(["@emotion/css","@grafana/data","@grafana/ui","module","react"],((e,t,l,r,i)=>(()=>{"use strict";var o={644:t=>{t.exports=e},305:e=>{e.exports=t},388:e=>{e.exports=l},325:e=>{e.exports=r},650:e=>{e.exports=i}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var l=n[e]={exports:{}};return o[e](l,l.exports,a),l.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="public/plugins/heywesty-trafficlight-panel/";var s={};return(()=>{a.r(s),a.d(s,{plugin:()=>k});var e=a(325),t=a.n(e);a.p=t()&&t().uri?t().uri.slice(0,t().uri.lastIndexOf("/")+1):"public/plugins/heywesty-trafficlight-panel/";var l,r,i,o=a(305);!function(e){e.None="none",e.Asc="ascending",e.Desc="descending"}(l||(l={})),function(e){e.Default="default",e.Rounded="rounded",e.SideLights="sidelights"}(r||(r={})),function(e){e.unsupported="unsupported",e.incorrectThresholds="incorrectThresholds",e.nodata="nodata",e.success="success"}(i||(i={}));var n=a(650),c=a.n(n),d=a(388);const f={go:"traffic-light-go",ready:"traffic-light-ready",stop:"traffic-light-stop",trafficLight:"heywesty-traffic-light",trafficLightValueContainer:"heywesty-traffic-light-value-container",trafficLightValue:"heywesty-traffic-light-value",trafficLightLegend:"heywesty-traffic-light-legend",feedbackMsgContainer:"heywesty-feedback-msg-container"},u={values:[{title:"",value:"",trend:{color:"transparent",value:0},hasLinks:!1}],status:i.nodata,invalidThresholds:void 0};function h(e){const t=null==e?void 0:e.steps.length;return!(!t||t<3)}function p(e,t,l,r){const i=(0,o.getActiveThreshold)(e,null==r?void 0:r.steps);var n;const a=null!==(n=null==r?void 0:r.steps)&&void 0!==n?n:[];return(t?a.slice().reverse():a).map((e=>({color:l(e.color),active:e.value===i.value})))}function g(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function m(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}(Object(t)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(t,l))})),e}function v(e){const{theme:t,data:r,fieldConfig:a,replaceVariables:s,timeZone:c,sortLights:d,reverseColors:f}=e;return(0,n.useMemo)((()=>{if(function(e){return!e||0===e.length}(r))return u;if(!function(e){return!(!e||0===e.length)&&e.every((e=>{const t=e.fields.find((e=>e.type===o.FieldType.number));return Boolean(t)}))}(r))return m(function(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{},r=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(l).filter((function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable})))),r.forEach((function(t){g(e,t,l[t])}))}return e}({},u),{status:i.unsupported});const{values:e,status:n,invalidThresholds:v}=function(e){return Boolean(null==e?void 0:e.some((e=>e.fields.some((e=>e.type===o.FieldType.time)))))}(r)?function(e,t,l,r,n,a){if(!l||0===l.length)return u;let s,c=i.nodata;const d=(0,o.getFieldDisplayValues)({fieldConfig:e,reduceOptions:{calcs:[]},replaceVariables:r,theme:t,data:l,timeZone:n}).map((e=>{var l,r,o,n;const d=h(e.field.thresholds),{title:f,text:u,suffix:g,prefix:m}=e.display,v=p(e.display.numeric,a,t.visualization.getColorByName,e.field.thresholds),y=function(e){const t={increasing:[],decreasing:[],equals:[]};if(void 0===e)return 0;e.map((function(e,l,r){if(l>0){const i=e-r[l-1];0===i?t.equals.push(i):i>0?t.increasing.push(i):t.decreasing.push(i)}return e}));const l=t.increasing.length,r=t.decreasing.length,i=t.equals.length;return l>r+i?1:r>l+i?-1:0}((null===(r=e.view)||void 0===r||null===(l=r.dataFrame.fields[1])||void 0===l?void 0:l.values.toArray())||(null===(n=e.view)||void 0===n||null===(o=n.dataFrame.fields[0])||void 0===o?void 0:o.values.toArray())),w=t.visualization.getColorByName(function(e){switch(e){case-1:return"red";case 0:return"transparent";default:return"#73BF69"}}(y));return d?c=i.success:(c=i.incorrectThresholds,s=e.field.thresholds),{title:f,value:u,prefix:m,suffix:g,colors:v,trend:{color:w,value:y},hasLinks:e.hasLinks,getLinks:e.getLinks}}));return{values:d,status:c,invalidThresholds:s}}(a,t,r,s,c,f):function(e,t,l){if(!t||0===t.length)return u;let r,n=i.nodata;const a=t[0].fields.find((e=>e.type===o.FieldType.number)),s=t[0].fields.find((e=>e.type===o.FieldType.string));let c=h(null==a?void 0:a.config.thresholds);return a&&s?{values:a.values.toArray().map(((t,d)=>{const{text:f,suffix:u,prefix:h}=a.display(t),g=s.values.toArray()[d],m=p(t,l,e.visualization.getColorByName,a.config.thresholds);return c?n=i.success:(n=i.incorrectThresholds,r=a.config.thresholds),{title:g,value:f,prefix:h,suffix:u,colors:m,trend:{color:"transparent",value:0},hasLinks:(0,o.hasLinks)(a),getLinks:a.getLinks}})),status:n,invalidThresholds:r}:u}(t,r,f);return{values:d===l.None?e:(y=e,w=d,y.sort(((e,t)=>w===l.Asc?e.value.localeCompare(t.value):t.value.localeCompare(e.value)))),invalidThresholds:v,status:n};var y,w}),[t,r,a,s,c,d,f])}var y=a(644);function w({thresholds:e}){const t=function(e){const{steps:t}=e,l=Array(3).fill(null);return l.map(((e,l)=>({isValid:Boolean(t[l])})))}(e),l=(0,d.useStyles2)(C);return c().createElement(d.Alert,{title:"Invalid thresholds",severity:"warning",style:{maxWidth:500}},c().createElement("p",null,"Please configure thresholds for all three lights:"),c().createElement("div",{className:l.grid},c().createElement("div",{className:l.trafficLight}),t.map(((e,t)=>c().createElement(b,{isValid:e.isValid,index:t,key:t})))))}const x=[2,1,3,2],E=[2,2,3,3];function b({isValid:e,index:t}){const l=e?"check":"times",r=e?"Threshold configured":"Threshold not configured",i=(0,d.useStyles2)(C),o=x.map(((e,l)=>l%2==0?e+t:e)).join(" / "),n=E.map(((e,l)=>l%2==0?e+t:e)).join(" / ");return c().createElement(c().Fragment,null,c().createElement("div",{style:{gridArea:o},className:(0,y.cx)(i.light,e?i.valid:i.invalid)},c().createElement(d.Icon,{name:l,size:"lg"})),c().createElement("span",{style:{gridArea:n},className:i.label},r))}const C=e=>({grid:(0,y.css)({display:"grid",gridTemplateColumns:"40px 1fr",gridTemplateRows:"4px repeat(3, 1fr) 4px",gap:e.spacing()}),trafficLight:(0,y.css)({backgroundColor:e.colors.background.canvas,borderRadius:50,gridArea:"1 / 1 / 6 / 2"}),light:(0,y.css)({alignItems:"center",backgroundColor:e.colors.background.secondary,borderRadius:100,display:"flex",justifyContent:"center",height:26,placeSelf:"center",width:26}),label:(0,y.css)({display:"flex",alignItems:"center",fontSize:e.typography.bodySmall.fontSize}),valid:(0,y.css)({backgroundColor:e.colors.success.main}),invalid:(0,y.css)({backgroundColor:e.colors.error.main})});const S={default:function({colors:e=[],bgColor:t="grey",emptyColor:l="black",onClick:r,horizontal:i=!1}){var o,n,a;return c().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:i?"0 0 512 272":"0 0 272 512",style:{height:"100%",width:"100%"},onClick:r},c().createElement("g",{transform:i?"rotate(-90 0 0)":void 0,style:{transformOrigin:"25% center"}},c().createElement("path",{fill:l,d:"M52 57.095h168v398H52z"}),c().createElement("path",{fill:t,fillRule:"evenodd",d:"M218.5 13c15.142 0 27.5 11.605 27.5 26.774 0 62.951 0 259.331-3.355 370.274C232.762 459.766 188.736 497 135.997 497c-52.74 0-96.783-37.234-107.422-86.952 0-57.875-.77-141.346-1.467-217.035C26.529 130.231 26 72.803 26 39.774 26 25.38 38.358 13 53.5 13h165ZM136 171.19c-27.762 0-50.286-22.523-50.286-50.285 0-27.762 22.524-50.286 50.286-50.286s50.286 22.524 50.286 50.286S163.762 171.19 136 171.19ZM85.714 255c0 27.762 22.524 50.286 50.286 50.286s50.286-22.524 50.286-50.286-22.524-50.286-50.286-50.286S85.714 227.238 85.714 255Zm0 134.095c0 27.762 22.524 50.286 50.286 50.286s50.286-22.524 50.286-50.286S163.762 338.81 136 338.81s-50.286 22.523-50.286 50.285Z",clipRule:"evenodd"}),(null===(o=e[2])||void 0===o?void 0:o.active)&&c().createElement("g",null,c().createElement("path",{"data-testid":f.go,fill:e[2].color,d:"M85.714 389.095c0 27.762 22.524 50.286 50.286 50.286s50.286-22.524 50.286-50.286S163.762 338.81 136 338.81s-50.286 22.523-50.286 50.285Z",style:{filter:`drop-shadow(0 0 16px ${e[2].color})`}}),c().createElement("path",{fill:"#000",fillOpacity:".1",fillRule:"evenodd",d:"M162.469 431.854a64.427 64.427 0 0 1-4.993.194c-35.004 0-63.38-28.377-63.38-63.381a64 64 0 0 1 .516-8.132 50.044 50.044 0 0 0-8.898 28.56c0 27.762 22.524 50.286 50.286 50.286 9.71 0 18.78-2.756 26.469-7.527Z",clipRule:"evenodd"}),c().createElement("ellipse",{cx:"153.809",cy:"365.524",fill:"#fff",fillOpacity:".35",rx:"12.571",ry:"20.429",transform:"rotate(-45 153.809 365.524)"})),(null===(n=e[1])||void 0===n?void 0:n.active)&&c().createElement("g",null,c().createElement("path",{"data-testid":f.ready,fill:e[1].color,d:"M85.714 255c0 27.762 22.524 50.286 50.286 50.286s50.286-22.524 50.286-50.286-22.524-50.286-50.286-50.286S85.714 227.238 85.714 255Z",style:{filter:`drop-shadow(0 0 16px ${e[1].color})`}}),c().createElement("path",{fill:"#000",fillOpacity:".1",fillRule:"evenodd",d:"M162.469 297.759a64.43 64.43 0 0 1-4.993.193c-35.004 0-63.38-28.376-63.38-63.381 0-2.755.175-5.469.516-8.131A50.042 50.042 0 0 0 85.714 255c0 27.762 22.524 50.286 50.286 50.286 9.71 0 18.78-2.756 26.469-7.527Z",clipRule:"evenodd"}),c().createElement("ellipse",{cx:"153.809",cy:"231.429",fill:"#fff",fillOpacity:".35",rx:"12.571",ry:"20.429",transform:"rotate(-45 153.809 231.429)"})),(null===(a=e[0])||void 0===a?void 0:a.active)&&c().createElement("g",null,c().createElement("path",{"data-testid":f.stop,fill:e[0].color,d:"M85.714 120.905c0 27.762 22.524 50.285 50.286 50.285s50.286-22.523 50.286-50.285c0-27.762-22.524-50.286-50.286-50.286s-50.286 22.524-50.286 50.286Z",style:{filter:`drop-shadow(0 0 16px ${e[0].color})`}}),c().createElement("path",{fill:"#000",fillOpacity:".1",fillRule:"evenodd",d:"M162.469 163.663a63.933 63.933 0 0 1-4.993.194c-35.004 0-63.38-28.376-63.38-63.381 0-2.755.175-5.469.516-8.131a50.042 50.042 0 0 0-8.898 28.56c0 27.762 22.524 50.286 50.286 50.286 9.71 0 18.78-2.756 26.469-7.528Z",clipRule:"evenodd"}),c().createElement("ellipse",{cx:"153.809",cy:"97.333",fill:"#fff",fillOpacity:".35",rx:"12.571",ry:"20.429",transform:"rotate(-45 153.809 97.333)"}))))},rounded:function({colors:e=[],bgColor:t="grey",emptyColor:l="black",onClick:r,horizontal:i=!1}){var o,n,a;return c().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:i?"0 0 512 272":"0 0 272 512",style:{height:"100%",width:"100%"},onClick:r},c().createElement("g",{transform:i?"rotate(-90 0 0)":void 0,style:{transformOrigin:"25% center"}},c().createElement("path",{fill:l,d:"M52 57.095h168v398H52z"}),c().createElement("path",{fill:t,fillRule:"evenodd",d:"M46 13c-11.046 0-20 8.954-20 20v446.095c0 11.046 8.954 20 20 20h180c11.046 0 20-8.954 20-20V33c0-11.046-8.954-20-20-20H46Zm39.714 376.095c0 27.762 22.524 50.286 50.286 50.286s50.286-22.524 50.286-50.286S163.762 338.81 136 338.81s-50.286 22.523-50.286 50.285Zm0-134.095c0 27.762 22.524 50.286 50.286 50.286s50.286-22.524 50.286-50.286-22.524-50.286-50.286-50.286S85.714 227.238 85.714 255Zm0-134.095c0 27.762 22.524 50.285 50.286 50.285s50.286-22.523 50.286-50.285c0-27.762-22.524-50.286-50.286-50.286s-50.286 22.524-50.286 50.286Z",clipRule:"evenodd"}),(null===(o=e[2])||void 0===o?void 0:o.active)&&c().createElement("g",null,c().createElement("path",{"data-testid":f.go,fill:e[2].color,d:"M85.714 389.095c0 27.762 22.524 50.286 50.286 50.286s50.286-22.524 50.286-50.286S163.762 338.81 136 338.81s-50.286 22.523-50.286 50.285Z",style:{filter:`drop-shadow(0 0 16px ${e[2].color})`}}),c().createElement("path",{fill:"#000",fillOpacity:".1",fillRule:"evenodd",d:"M162.469 431.854a64.427 64.427 0 0 1-4.993.194c-35.004 0-63.38-28.377-63.38-63.381a64 64 0 0 1 .516-8.132 50.044 50.044 0 0 0-8.898 28.56c0 27.762 22.524 50.286 50.286 50.286 9.71 0 18.78-2.756 26.469-7.527Z",clipRule:"evenodd"}),c().createElement("ellipse",{cx:"153.81",cy:"365.524",fill:"#fff",fillOpacity:".35",rx:"12.571",ry:"20.429",transform:"rotate(-45 153.81 365.524)"})),(null===(n=e[1])||void 0===n?void 0:n.active)&&c().createElement("g",null,c().createElement("path",{"data-testid":f.ready,fill:e[1].color,d:"M85.714 255c0 27.762 22.524 50.286 50.286 50.286s50.286-22.524 50.286-50.286-22.524-50.286-50.286-50.286S85.714 227.238 85.714 255Z",style:{filter:`drop-shadow(0 0 16px ${e[1].color})`}}),c().createElement("path",{fill:"#000",fillOpacity:".1",fillRule:"evenodd",d:"M162.469 297.759a64.43 64.43 0 0 1-4.993.193c-35.004 0-63.38-28.376-63.38-63.381 0-2.755.175-5.469.516-8.131A50.042 50.042 0 0 0 85.714 255c0 27.762 22.524 50.286 50.286 50.286 9.71 0 18.78-2.756 26.469-7.527Z",clipRule:"evenodd"}),c().createElement("ellipse",{cx:"153.81",cy:"231.429",fill:"#fff",fillOpacity:".35",rx:"12.571",ry:"20.429",transform:"rotate(-45 153.81 231.429)"})),(null===(a=e[0])||void 0===a?void 0:a.active)&&c().createElement("g",null,c().createElement("path",{"data-testid":f.stop,fill:e[0].color,d:"M85.714 120.905c0 27.762 22.524 50.285 50.286 50.285s50.286-22.523 50.286-50.285c0-27.762-22.524-50.286-50.286-50.286s-50.286 22.524-50.286 50.286Z",style:{filter:`drop-shadow(0 0 16px ${e[0].color})`}}),c().createElement("path",{fill:"#000",fillOpacity:".1",fillRule:"evenodd",d:"M162.469 163.663a63.933 63.933 0 0 1-4.993.194c-35.004 0-63.38-28.376-63.38-63.381 0-2.755.175-5.469.516-8.131a50.042 50.042 0 0 0-8.898 28.56c0 27.762 22.524 50.286 50.286 50.286 9.71 0 18.78-2.756 26.469-7.528Z",clipRule:"evenodd"}),c().createElement("ellipse",{cx:"153.81",cy:"97.333",fill:"#fff",fillOpacity:".35",rx:"12.571",ry:"20.429",transform:"rotate(-45 153.81 97.333)"}))))},sidelights:function({colors:e=[],bgColor:t="grey",emptyColor:l="black",onClick:r,horizontal:i=!1}){var o,n,a,s,d,u;return c().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:i?"0 0 512 272":"0 0 272 512",style:{height:"100%",width:"100%"},onClick:r},c().createElement("g",{transform:i?"rotate(-90 0 0)":void 0,style:{transformOrigin:"25% center"}},(null===(o=e[2])||void 0===o?void 0:o.active)&&c().createElement("g",null,c().createElement("path",{fill:e[2].color,d:"M6 389.095c0 27.762 22.524 50.286 50.286 50.286s50.285-22.524 50.285-50.286-22.523-50.285-50.285-50.285C28.524 338.81 6 361.333 6 389.095Z",style:{filter:`drop-shadow(0 0 4px ${e[2].color})`}}),c().createElement("path",{fill:e[2].color,d:"M166 389.095c0 27.762 22.524 50.286 50.286 50.286s50.285-22.524 50.285-50.286-22.523-50.285-50.285-50.285c-27.762 0-50.286 22.523-50.286 50.285Z",style:{filter:`drop-shadow(0 0 4px ${e[2].color})`}})),(null===(n=e[1])||void 0===n?void 0:n.active)&&c().createElement("g",null,c().createElement("path",{fill:e[1].color,d:"M6 255c0 27.762 22.524 50.286 50.286 50.286S106.57 282.762 106.57 255s-22.523-50.286-50.285-50.286C28.524 204.714 6 227.238 6 255Z",style:{filter:`drop-shadow(0 0 4px ${e[1].color})`}}),c().createElement("path",{fill:e[1].color,d:"M166 255c0 27.762 22.524 50.286 50.286 50.286s50.285-22.524 50.285-50.286-22.523-50.286-50.285-50.286C188.524 204.714 166 227.238 166 255Z",style:{filter:`drop-shadow(0 0 4px ${e[1].color})`}})),(null===(a=e[0])||void 0===a?void 0:a.active)&&c().createElement("g",null,c().createElement("path",{fill:e[0].color,d:"M6 120.905c0 27.762 22.524 50.285 50.286 50.285s50.285-22.523 50.285-50.285c0-27.762-22.523-50.286-50.285-50.286C28.524 70.619 6 93.143 6 120.905Z",style:{filter:`drop-shadow(0 0 4px ${e[0].color})`}}),c().createElement("path",{fill:e[0].color,d:"M166 120.905c0 27.762 22.524 50.285 50.286 50.285s50.285-22.523 50.285-50.285c0-27.762-22.523-50.286-50.285-50.286-27.762 0-50.286 22.524-50.286 50.286Z",style:{filter:`drop-shadow(0 0 4px ${e[0].color})`}})),c().createElement("path",{fill:l,d:"M52 57.095h168v398H52z"}),c().createElement("path",{fill:t,fillRule:"evenodd",d:"M26 33c0-11.046 8.954-20 20-20h180c11.046 0 20 8.954 20 20v31h26l-26 57v77h26l-26 57v77h26l-26 57v90.095c0 11.046-8.954 20-20 20H46c-11.046 0-20-8.954-20-20V389L0 332h26v-77L0 198h26v-77L0 64h26V33Zm110 406.381c-27.762 0-50.286-22.524-50.286-50.286S108.238 338.81 136 338.81s50.286 22.523 50.286 50.285c0 27.762-22.524 50.286-50.286 50.286Zm0-134.095c-27.762 0-50.286-22.524-50.286-50.286s22.524-50.286 50.286-50.286 50.286 22.524 50.286 50.286-22.524 50.286-50.286 50.286Zm0-134.096c-27.762 0-50.286-22.523-50.286-50.285 0-27.762 22.524-50.286 50.286-50.286s50.286 22.524 50.286 50.286S163.762 171.19 136 171.19Z",clipRule:"evenodd"}),(null===(s=e[2])||void 0===s?void 0:s.active)&&c().createElement("g",null,c().createElement("path",{"data-testid":f.go,fill:e[2].color,d:"M85.714 389.095c0 27.762 22.524 50.286 50.286 50.286s50.286-22.524 50.286-50.286S163.762 338.81 136 338.81s-50.286 22.523-50.286 50.285Z",style:{filter:`drop-shadow(0 0 16px ${e[2].color})`}}),c().createElement("path",{fill:"#000",fillOpacity:".1",fillRule:"evenodd",d:"M162.469 431.854a64.427 64.427 0 0 1-4.993.194c-35.004 0-63.38-28.377-63.38-63.381a64 64 0 0 1 .516-8.132 50.044 50.044 0 0 0-8.898 28.56c0 27.762 22.524 50.286 50.286 50.286 9.71 0 18.78-2.756 26.469-7.527Z",clipRule:"evenodd"}),c().createElement("ellipse",{cx:"153.809",cy:"365.524",fill:"#fff",fillOpacity:".35",rx:"12.571",ry:"20.429",transform:"rotate(-45 153.809 365.524)"})),(null===(d=e[1])||void 0===d?void 0:d.active)&&c().createElement("g",null,c().createElement("path",{"data-testid":f.ready,fill:e[1].color,d:"M85.714 255c0 27.762 22.524 50.286 50.286 50.286s50.286-22.524 50.286-50.286-22.524-50.286-50.286-50.286S85.714 227.238 85.714 255Z",style:{filter:`drop-shadow(0 0 16px ${e[1].color})`}}),c().createElement("path",{fill:"#000",fillOpacity:".1",fillRule:"evenodd",d:"M162.469 297.759a64.43 64.43 0 0 1-4.993.193c-35.004 0-63.38-28.376-63.38-63.381 0-2.755.175-5.469.516-8.131A50.042 50.042 0 0 0 85.714 255c0 27.762 22.524 50.286 50.286 50.286 9.71 0 18.78-2.756 26.469-7.527Z",clipRule:"evenodd"}),c().createElement("ellipse",{cx:"153.809",cy:"231.429",fill:"#fff",fillOpacity:".35",rx:"12.571",ry:"20.429",transform:"rotate(-45 153.809 231.429)"})),(null===(u=e[0])||void 0===u?void 0:u.active)&&c().createElement("g",null,c().createElement("path",{"data-testid":f.stop,fill:e[0].color,d:"M85.714 120.905c0 27.762 22.524 50.285 50.286 50.285s50.286-22.523 50.286-50.285c0-27.762-22.524-50.286-50.286-50.286s-50.286 22.524-50.286 50.286Z",style:{filter:`drop-shadow(0 0 16px ${e[0].color})`}}),c().createElement("path",{fill:"#000",fillOpacity:".1",fillRule:"evenodd",d:"M162.469 163.663a63.933 63.933 0 0 1-4.993.194c-35.004 0-63.38-28.376-63.38-63.381 0-2.755.175-5.469.516-8.131a50.042 50.042 0 0 0-8.898 28.56c0 27.762 22.524 50.286 50.286 50.286 9.71 0 18.78-2.756 26.469-7.528Z",clipRule:"evenodd"}),c().createElement("ellipse",{cx:"153.809",cy:"97.333",fill:"#fff",fillOpacity:".35",rx:"12.571",ry:"20.429",transform:"rotate(-45 153.809 97.333)"}))))}};function O({showValue:e,showLegend:t,showTrend:l,light:r,theme:i}){return e||t||l?c().createElement("div",{"data-testid":f.trafficLightValueContainer,style:{alignItems:"center",backgroundColor:l?`color-mix(in srgb, ${r.trend.color} 20%, ${i.colors.background.primary})`:"transparent",display:"flex",flexDirection:"column",justifyContent:"center",padding:i.spacing(.25)}},t&&c().createElement("span",{"data-testid":f.trafficLightLegend},r.title),e&&c().createElement("strong",{"data-testid":f.trafficLightValue},r.prefix,r.value,r.suffix)):null}const k=new o.PanelPlugin((function({data:e,width:t,height:l,options:r,replaceVariables:o,fieldConfig:n,timeZone:a}){const{minLightWidth:s,sortLights:u,showLegend:h,showValue:p,showTrend:g,singleRow:m,style:y,reverseColors:x}=r,E=(0,d.useTheme2)(),{values:b,status:C,invalidThresholds:k}=v({fieldConfig:n,replaceVariables:o,theme:E,data:e.series,timeZone:a,sortLights:u,reverseColors:x}),M=S[y],{rows:L,cols:Z}=function(e,t,l){if(0===l)return{rows:0,cols:0};if(e<t)return{rows:1,cols:l};const r=Math.floor(e/t),i=Math.ceil(l/r);return{rows:i,cols:Math.ceil(l/i)}}(t,s,b.length),R=function({rows:e,cols:t,singleRow:l,minLightWidth:r,theme:i}){const o={display:"grid",alignContent:"top",gridTemplateColumns:`repeat(${t}, minmax(${r}px, 1fr)`,gridTemplateRows:`repeat(${e},  ${100/e}%)`,justifyContent:"center",minHeight:"100%",height:"100%",boxSizing:"border-box"},n={display:"flex",height:"100%",minHeight:"100%",overflowX:"auto"},a={display:"grid",gridTemplateRows:"1fr max-content",gap:i.spacing(),padding:i.spacing(.5)},s={display:"flex",flexDirection:"column",justifyContent:"center",gap:i.spacing(),padding:i.spacing(.5),minWidth:r};return{containerStyle:l?n:o,itemStyle:l?s:a,centeredContent:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}}}({rows:L,cols:Z,singleRow:m,minLightWidth:s,theme:E});return C===i.nodata?c().createElement("div",{"data-testid":f.feedbackMsgContainer,style:R.centeredContent},c().createElement("h4",null,"The query returned no data.")):C===i.unsupported?c().createElement("div",{"data-testid":f.feedbackMsgContainer,style:R.centeredContent},c().createElement("h4",null,"This data format is unsupported.")):C===i.incorrectThresholds?c().createElement("div",{style:R.centeredContent},c().createElement(w,{thresholds:k})):c().createElement("div",{style:{width:t,height:l},"data-testid":f.trafficLight},c().createElement("div",{style:R.containerStyle},b.map((e=>c().createElement("div",{key:e.title,style:R.itemStyle},e.hasLinks&&void 0!==e.getLinks?c().createElement(d.DataLinksContextMenu,{links:e.getLinks,style:{flexGrow:1}},(t=>c().createElement(M,{bgColor:E.isDark?E.colors.background.secondary:"#C5C5C8",emptyColor:E.isDark?E.colors.background.primary:"#AAAAAF",colors:e.colors,onClick:t.openMenu,horizontal:r.horizontal}))):c().createElement(M,{bgColor:E.isDark?E.colors.background.secondary:"#C5C5C8",emptyColor:E.isDark?E.colors.background.primary:"#AAAAAF",colors:e.colors,horizontal:r.horizontal}),c().createElement(O,{showValue:p,showLegend:h,showTrend:g,light:e,theme:E}))))))})).useFieldConfig().setPanelOptions((e=>e.addNumberInput({path:"minLightWidth",name:"Minimum light width",description:"Set the minimum traffic light width",defaultValue:100}).addBooleanSwitch({path:"singleRow",name:"Single row",description:"Place all lights in a single row",defaultValue:!1}).addBooleanSwitch({path:"reverseColors",name:"Reverse light colors",description:"Reverse the order of the light colors",defaultValue:!1}).addRadio({path:"sortLights",name:"Sort lights",description:"Sort lights based on values",defaultValue:l.None,settings:{options:[{value:l.None,label:"None"},{value:l.Asc,label:"Ascending"},{value:l.Desc,label:"Descending"}]}}).addBooleanSwitch({path:"showValue",name:"Show value",description:"Show or hide the value",defaultValue:!0}).addBooleanSwitch({path:"showLegend",name:"Show legend",description:"Show or hide the legend (query name)",defaultValue:!0}).addBooleanSwitch({path:"showTrend",name:"Show trend",description:"Show or hide the trend color",defaultValue:!0}).addSelect({path:"style",name:"Traffic light style",description:"Choose the style for the traffic lights",defaultValue:"default",settings:{options:[{value:r.Default,label:"Default"},{value:r.Rounded,label:"Rounded"},{value:r.SideLights,label:"Side lights"}]}}).addBooleanSwitch({path:"horizontal",name:"Horizontal traffic lights",description:"Change the orientation of the traffic lights",defaultValue:!1})))})(),s})()));
//# sourceMappingURL=module.js.map